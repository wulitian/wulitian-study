# 代码优化

## 数据存储方面

- 较少变量或函数在作用域链中的查找，因为作用域链越深被引擎搜索到的时间就越长。

- 对局部变量的缓存，比如多次获取一个dom我们可以缓存对当前dom的获取。

- 谨慎使用闭包，使用闭包可能导致内存泄漏，如果不能正确释放闭包资源会导致资源泄露。

## 流程控制

- 条件判断如果出现if else语句可以尝试使用switch case代替代码更便于理解。

- if else 可以根据判断的优先级进行优化，把理论上出现频率较高的代码放在前面，或者用二分法实现可以减少匹配次数。

- 可以将条件值存储到数组或者对象中通过匹配key的值来获取当前条件的value,相当于策略模式。

- 通常如果离散值高于十个使用使用对象，两个至十个使用switch case,一两个使用if else。

- for循环语句使用时将判断条件写在外部缓存。

- for in 循环智能循环可枚举的属性，并且不可以手动结束循环这样很浪费性能forEach也不可以结束循环，推荐使用for of 可以遍历可迭代的数据结构性能方面好于前两者。

- 尽量不使用递归。

- 避免重复工作可以将结果缓存例如实现一个计算器我们可以缓存计算过的数字与结果。

## 字符串

- 使用正则匹配时少用贪婪模式：多用贪婪模式会引起回溯问题，可以使用独占模式来避免回溯。

- 尽量使正则提前结束。

- 减少分支数量。

## 快速响应

- 合理地加入异步队列把一些，推迟加载非首要资源。

## 细节方面

- 合理地使用位运算代替数学计算，位运算可以提高大规模的运算速度。

- 使用原生方法，引擎使用原生方法加载更快，借助v8引擎加速，其中如果我们反复修改变量类型会导致v8的逆优化这点需要注意。








